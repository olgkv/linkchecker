# Web links status service

Простой веб-сервис на Go.

## Запуск

```bash
go run ./...
```

Сервис слушает порт `8080`.

## API

### POST /links

Тело запроса:

```json
{"links": ["google.com", "malformedlink.gg"]}
```

Ответ:

```json
{"links": {"google.com": "available", "malformedlink.gg": "not available"}, "links_num": 1}
```

Каждый запрос получает уникальный номер `links_num`, который хранится на диске в файле `tasks.json`. Это позволяет переживать перезапуски сервиса без потери уже созданных задач и их результатов.

### POST /report

Тело запроса:

```json
{"links_list": [1, 2]}
```

Ответ: PDF-файл с отчетом по всем ссылкам, входящим в переданные задачи.

## Проверка доступности ссылок

Для каждой ссылки выполняется HTTP-запрос (если протокол не указан, добавляется `https://`). Статус:

- `available` — код ответа 2xx–3xx
- `not available` — ошибка запроса или иной код ответа

## Устойчивость к перезапускам

- Все задачи (`links_num`, список ссылок, результаты проверки) сериализуются в файл `tasks.json`.
- Запись ведется в файл через временный файл и атомарный `rename`, чтобы избежать порчи данных при падении.
- При старте сервис читает `tasks.json` и восстанавливает все ранее созданные задачи и их номера.

Во время перезапуска уже запущенные HTTP-запросы будут корректно завершены (graceful shutdown), новые запросы будут обслужены после старта нового процесса.
